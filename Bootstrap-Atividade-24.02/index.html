<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Busca de Usu치rios</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .spinner {
        display: none;
      }
    </style>
  </head>
  <body class="bg-light">
    <div class="container mt-5">
      <h2 class="text-center mb-4">游댌 Buscar Usu치rio</h2>

      <!-- Campo de entrada e bot칚o -->
      <div class="input-group mb-3">
        <input
          type="text"
          id="userIds"
          class="form-control"
          placeholder="Digite os IDs dos usu치rios (1 a 10, separados por v칤rgula)"
        />
        <button id="searchButton" class="btn btn-primary">Buscar</button>
        <button id="cleanButton" class="btn btn-dark">Limpar</button>
      </div>

      <!-- 츼rea para exibir os resultados -->
      <div id="userInfo" class="mt-4">
        <div class="spinner spinner-border" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
      </div>
    </div>

    <script>
      document
        .getElementById("searchButton")
        .addEventListener("click", function () {
          let userIds = document.getElementById("userIds").value;
          let idsArray = userIds.split(",").map((id) => id.trim());

          const spinner = document.createElement("div");
          spinner.classList.add("spinner-border", "text-primary");
          spinner.setAttribute("role", "status");
          const spinnerText = document.createElement("span");
          spinnerText.classList.add("visually-hidden");
          spinnerText.textContent = "Carregando...";
          spinner.appendChild(spinnerText);
          document.getElementById("userinfo").innerHTML = "";
          document.getElementById("userinfo").appendChild(spinner);

          // TODO: Completar a requisi칞칚o AJAX usando fetch()
          fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
            .then((response) => response.json())
            .then((user) => {
              // TODO: Exibir os dados do usu치rio no HTML
              document.getElementById("userInfo").innerHTML = `
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">${user.name}</h5>
                                <p class="card-text"><strong>Email:</strong> ${user.email}</p>
                                <p class="card-text"><strong>Telefone:</strong> ${user.phone}</p>
                                <p class="card-text"><strong>Empresa:</strong> ${user.company.name}</p>
                            </div>
                        </div>
                    `;
            })
            .catch((error) => {
              // TODO: Exibir mensagem de erro amig치vel
              document.getElementById("userInfo").innerHTML = `
                        <div class="alert alert-danger">Usu치rio n칚o encontrado!</div>
                    `;
            });
        });

      // Limpeza de dados

      document
        .getElementById("cleanButton")
        .addEventListener("click", function () {
          document.getElementById("userIds").value = "";
          document.getElementById("userInfo").innerHTML = "";
        });
    </script>
  </body>
</html>
